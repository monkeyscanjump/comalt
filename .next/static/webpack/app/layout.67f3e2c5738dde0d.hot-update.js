"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/layout",{

/***/ "(app-pages-browser)/./src/contexts/auth/AuthProvider.tsx":
/*!********************************************!*\
  !*** ./src/contexts/auth/AuthProvider.tsx ***!
  \********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthProvider: function() { return /* binding */ AuthProvider; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _AuthContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AuthContext */ \"(app-pages-browser)/./src/contexts/auth/AuthContext.tsx\");\n/* harmony import */ var _WalletService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./WalletService */ \"(app-pages-browser)/./src/contexts/auth/WalletService.ts\");\n/* harmony import */ var _config_whitelist__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/config/whitelist */ \"(app-pages-browser)/./src/config/whitelist.ts\");\n/* __next_internal_client_entry_do_not_use__ AuthProvider auto */ \nvar _s = $RefreshSig$();\n\n\n\n\nconst AuthProvider = (param)=>{\n    let { children } = param;\n    _s();\n    // Account and wallet states\n    const [walletAddress, setWalletAddress] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [accounts, setAccounts] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [selectedAccount, setSelectedAccount] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // UI states\n    const [isConnecting, setIsConnecting] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [showAccountSelector, setShowAccountSelector] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Authentication states\n    const [isAuthenticated, setIsAuthenticated] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isAllowed, setIsAllowed] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [token, setToken] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // Signature states\n    const [wasSignatureRejected, setWasSignatureRejected] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isRequestingSignature, setIsRequestingSignature] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Public mode detection\n    const isPublicMode = !(0,_config_whitelist__WEBPACK_IMPORTED_MODULE_4__.hasWhitelistedAddresses)();\n    // Calculate derived states\n    const isWalletConnected = !!selectedAccount || !!walletAddress;\n    // Initialize auth state\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const initAuth = async ()=>{\n            try {\n                // Restore connection from localStorage if available\n                const storedAddress = localStorage.getItem(\"wallet-address\");\n                const storedToken = localStorage.getItem(\"auth-token\");\n                if (storedAddress) {\n                    setWalletAddress(storedAddress);\n                    // Get accounts if extension is available\n                    try {\n                        const isEnabled = await _WalletService__WEBPACK_IMPORTED_MODULE_3__.WalletService.enableWallet();\n                        if (isEnabled) {\n                            const walletAccounts = await _WalletService__WEBPACK_IMPORTED_MODULE_3__.WalletService.getAccounts();\n                            setAccounts(walletAccounts);\n                            // Find the stored account\n                            const account = walletAccounts.find((acc)=>acc.address === storedAddress);\n                            if (account) {\n                                setSelectedAccount(account);\n                            }\n                        }\n                    } catch (err) {\n                        console.warn(\"Failed to restore wallet connection:\", err);\n                    }\n                    // Restore auth state\n                    if (storedToken) {\n                        setToken(storedToken);\n                        setIsAuthenticated(true);\n                        setIsAllowed(true);\n                        try {\n                            // Optionally restore user data if you have it\n                            const userData = localStorage.getItem(\"user-data\");\n                            if (userData) {\n                                setUser(JSON.parse(userData));\n                            }\n                        } catch (e) {\n                            console.warn(\"Failed to restore user data:\", e);\n                        }\n                    }\n                }\n            } catch (err) {\n                console.error(\"Error initializing auth:\", err);\n            } finally{\n                setIsLoading(false);\n            }\n        };\n        initAuth();\n    }, []);\n    // Connect wallet\n    const connect = async ()=>{\n        setIsConnecting(true);\n        setError(null);\n        try {\n            // Enable wallet extension\n            const isEnabled = await _WalletService__WEBPACK_IMPORTED_MODULE_3__.WalletService.enableWallet();\n            if (!isEnabled) {\n                throw new Error(\"Wallet extension not found or not enabled\");\n            }\n            // Get accounts\n            const walletAccounts = await _WalletService__WEBPACK_IMPORTED_MODULE_3__.WalletService.getAccounts();\n            if (!walletAccounts || walletAccounts.length === 0) {\n                throw new Error(\"No accounts found in wallet\");\n            }\n            // Update state\n            setAccounts(walletAccounts);\n            setShowAccountSelector(true);\n            return true;\n        } catch (err) {\n            console.error(\"Wallet connection error:\", err);\n            setError(err instanceof Error ? err.message : \"Failed to connect wallet\");\n            return false;\n        } finally{\n            setIsConnecting(false);\n        }\n    };\n    // Select account\n    const selectAccount = async (account)=>{\n        setSelectedAccount(account);\n        setWalletAddress(account.address);\n        setShowAccountSelector(false);\n        // Save to localStorage\n        localStorage.setItem(\"wallet-address\", account.address);\n        // Check if the account is allowed\n        const allowed = isPublicMode || (0,_config_whitelist__WEBPACK_IMPORTED_MODULE_4__.hasWhitelistedAddresses)();\n        setIsAllowed(allowed);\n        if (allowed) {\n            // Automatically trigger signature request - this was missing\n            try {\n                console.log(\"Automatically requesting signature for account:\", account.address);\n                const success = await requestSignature(account.address);\n                if (!success) {\n                    console.warn(\"Signature request failed or was rejected\");\n                    // Set specific error if rejected\n                    if (wasSignatureRejected) {\n                        setError(\"Signature rejected. Please sign the message to authenticate.\");\n                    }\n                }\n            } catch (err) {\n                console.error(\"Error during signature request:\", err);\n                setError(err instanceof Error ? err.message : \"Authentication failed\");\n            }\n        }\n    };\n    // Sign message\n    const signMessage = async (message, accountOverride)=>{\n        const addressToUse = (accountOverride === null || accountOverride === void 0 ? void 0 : accountOverride.address) || (selectedAccount === null || selectedAccount === void 0 ? void 0 : selectedAccount.address) || walletAddress;\n        if (!addressToUse) return null;\n        try {\n            return await _WalletService__WEBPACK_IMPORTED_MODULE_3__.WalletService.signMessage(addressToUse, message);\n        } catch (err) {\n            console.error(\"Signature error:\", err);\n            // Check if user rejected\n            if (err instanceof Error && err.message.includes(\"reject\")) {\n                setWasSignatureRejected(true);\n            }\n            throw err;\n        }\n    };\n    // Request signature for authentication\n    const requestSignature = async (address)=>{\n        if (!address) return false;\n        setIsRequestingSignature(true);\n        setWasSignatureRejected(false);\n        try {\n            var _selectedAccount_meta, _selectedAccount_meta1;\n            // Create a unique message\n            const message = \"Sign this message to authenticate with Download Manager: \".concat(Date.now());\n            // Get signature\n            const signature = await signMessage(message);\n            if (!signature) return false;\n            // In a real app, you'd verify this signature on the server\n            // For demo, we'll just set a token\n            const demoToken = \"demo-auth-token-\" + Date.now();\n            setToken(demoToken);\n            localStorage.setItem(\"auth-token\", demoToken);\n            // Set authenticated state\n            setIsAuthenticated(true);\n            // Create demo user\n            const demoUser = {\n                id: \"1\",\n                address,\n                name: (selectedAccount === null || selectedAccount === void 0 ? void 0 : (_selectedAccount_meta = selectedAccount.meta) === null || _selectedAccount_meta === void 0 ? void 0 : _selectedAccount_meta.name) || null,\n                isAdmin: true,\n                createdAt: new Date(),\n                updatedAt: new Date(),\n                lastLoginAt: new Date(),\n                username: (selectedAccount === null || selectedAccount === void 0 ? void 0 : (_selectedAccount_meta1 = selectedAccount.meta) === null || _selectedAccount_meta1 === void 0 ? void 0 : _selectedAccount_meta1.name) || \"User\" // For backward compatibility\n            };\n            setUser(demoUser);\n            localStorage.setItem(\"user-data\", JSON.stringify(demoUser));\n            return true;\n        } catch (err) {\n            console.error(\"Signature request failed:\", err);\n            return false;\n        } finally{\n            setIsRequestingSignature(false);\n        }\n    };\n    // Refresh auth token\n    const refreshAuthToken = async ()=>{\n        // In a real app, this would refresh the token with the server\n        // For demo, we'll just generate a new token\n        if (!isAuthenticated || !walletAddress) return false;\n        try {\n            const newToken = \"refreshed-token-\" + Date.now();\n            setToken(newToken);\n            localStorage.setItem(\"auth-token\", newToken);\n            return true;\n        } catch (err) {\n            console.error(\"Token refresh failed:\", err);\n            return false;\n        }\n    };\n    // Logout\n    const logout = ()=>{\n        setSelectedAccount(null);\n        setWalletAddress(null);\n        setIsAuthenticated(false);\n        setIsAllowed(false);\n        setUser(null);\n        setToken(null);\n        // Clear localStorage\n        localStorage.removeItem(\"wallet-address\");\n        localStorage.removeItem(\"auth-token\");\n        localStorage.removeItem(\"user-data\");\n    };\n    // Reset rejection state\n    const resetRejectionState = ()=>{\n        setWasSignatureRejected(false);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_AuthContext__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Provider, {\n        value: {\n            // Account states\n            walletAddress,\n            accounts,\n            selectedAccount,\n            // UI states\n            error,\n            showAccountSelector,\n            setShowAccountSelector,\n            // User data\n            user,\n            token,\n            // Core methods\n            logout,\n            connect,\n            selectAccount,\n            signMessage,\n            refreshAuthToken,\n            requestSignature,\n            // Signature states\n            wasSignatureRejected,\n            isRequestingSignature,\n            resetRejectionState,\n            // Derived states\n            isPublicMode,\n            isWalletConnected,\n            isAuthenticated,\n            isLoading,\n            isAllowed,\n            isConnecting\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\crist\\\\monkeyscanjump\\\\download-manager\\\\src\\\\contexts\\\\auth\\\\AuthProvider.tsx\",\n        lineNumber: 261,\n        columnNumber: 5\n    }, undefined);\n};\n_s(AuthProvider, \"5ZyDRWWtJ2mNA+6ABUIrbFatU80=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb250ZXh0cy9hdXRoL0F1dGhQcm92aWRlci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBRW1EO0FBQ1g7QUFDUTtBQUNhO0FBSXRELE1BQU1NLGVBQWU7UUFBQyxFQUFFQyxRQUFRLEVBQWlDOztJQUN0RSw0QkFBNEI7SUFDNUIsTUFBTSxDQUFDQyxlQUFlQyxpQkFBaUIsR0FBR1IsK0NBQVFBLENBQWdCO0lBQ2xFLE1BQU0sQ0FBQ1MsVUFBVUMsWUFBWSxHQUFHViwrQ0FBUUEsQ0FBNEIsRUFBRTtJQUN0RSxNQUFNLENBQUNXLGlCQUFpQkMsbUJBQW1CLEdBQUdaLCtDQUFRQSxDQUFpQztJQUV2RixZQUFZO0lBQ1osTUFBTSxDQUFDYSxjQUFjQyxnQkFBZ0IsR0FBR2QsK0NBQVFBLENBQUM7SUFDakQsTUFBTSxDQUFDZSxXQUFXQyxhQUFhLEdBQUdoQiwrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUNpQixPQUFPQyxTQUFTLEdBQUdsQiwrQ0FBUUEsQ0FBZ0I7SUFDbEQsTUFBTSxDQUFDbUIscUJBQXFCQyx1QkFBdUIsR0FBR3BCLCtDQUFRQSxDQUFDO0lBRS9ELHdCQUF3QjtJQUN4QixNQUFNLENBQUNxQixpQkFBaUJDLG1CQUFtQixHQUFHdEIsK0NBQVFBLENBQUM7SUFDdkQsTUFBTSxDQUFDdUIsV0FBV0MsYUFBYSxHQUFHeEIsK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDeUIsTUFBTUMsUUFBUSxHQUFHMUIsK0NBQVFBLENBQWM7SUFDOUMsTUFBTSxDQUFDMkIsT0FBT0MsU0FBUyxHQUFHNUIsK0NBQVFBLENBQWdCO0lBRWxELG1CQUFtQjtJQUNuQixNQUFNLENBQUM2QixzQkFBc0JDLHdCQUF3QixHQUFHOUIsK0NBQVFBLENBQUM7SUFDakUsTUFBTSxDQUFDK0IsdUJBQXVCQyx5QkFBeUIsR0FBR2hDLCtDQUFRQSxDQUFDO0lBRW5FLHdCQUF3QjtJQUN4QixNQUFNaUMsZUFBZSxDQUFDN0Is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SixpQkFBaUI7UUFDakJjLG1CQUFtQjtRQUNuQkUsYUFBYTtRQUNiRSxRQUFRO1FBQ1JFLFNBQVM7UUFFVCxxQkFBcUI7UUFDckJTLGFBQWFpRCxVQUFVLENBQUM7UUFDeEJqRCxhQUFhaUQsVUFBVSxDQUFDO1FBQ3hCakQsYUFBYWlELFVBQVUsQ0FBQztJQUMxQjtJQUVBLHdCQUF3QjtJQUN4QixNQUFNQyxzQkFBc0I7UUFDMUJ6RCx3QkFBd0I7SUFDMUI7SUFFQSxxQkFDRSw4REFBQzVCLG9EQUFXQSxDQUFDc0YsUUFBUTtRQUNuQkMsT0FBTztZQUNMLGlCQUFpQjtZQUNqQmxGO1lBQ0FFO1lBQ0FFO1lBRUEsWUFBWTtZQUNaTTtZQUNBRTtZQUNBQztZQUVBLFlBQVk7WUFDWks7WUFDQUU7WUFFQSxlQUFlO1lBQ2YwRDtZQUNBOUI7WUFDQUk7WUFDQU07WUFDQWtCO1lBQ0FuQjtZQUVBLG1CQUFtQjtZQUNuQm5DO1lBQ0FFO1lBQ0F3RDtZQUVBLGlCQUFpQjtZQUNqQnREO1lBQ0FDO1lBQ0FiO1lBQ0FOO1lBQ0FRO1lBQ0FWO1FBQ0Y7a0JBRUNQOzs7Ozs7QUFHUCxFQUFFO0dBcFNXRDtLQUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvY29udGV4dHMvYXV0aC9BdXRoUHJvdmlkZXIudHN4Pzg0ZjkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IEF1dGhDb250ZXh0IGZyb20gJy4vQXV0aENvbnRleHQnO1xuaW1wb3J0IHsgV2FsbGV0U2VydmljZSB9IGZyb20gJy4vV2FsbGV0U2VydmljZSc7XG5pbXBvcnQgeyBoYXNXaGl0ZWxpc3RlZEFkZHJlc3NlcyB9IGZyb20gJ0AvY29uZmlnL3doaXRlbGlzdCc7XG5pbXBvcnQgdHlwZSB7IEluamVjdGVkQWNjb3VudFdpdGhNZXRhIH0gZnJvbSAnQHBvbGthZG90L2V4dGVuc2lvbi1pbmplY3QvdHlwZXMnO1xuaW1wb3J0IHR5cGUgeyBVc2VyIH0gZnJvbSAnQC90eXBlcy91c2VyJztcblxuZXhwb3J0IGNvbnN0IEF1dGhQcm92aWRlciA9ICh7IGNoaWxkcmVuIH06IHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9KSA9PiB7XG4gIC8vIEFjY291bnQgYW5kIHdhbGxldCBzdGF0ZXNcbiAgY29uc3QgW3dhbGxldEFkZHJlc3MsIHNldFdhbGxldEFkZHJlc3NdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFthY2NvdW50cywgc2V0QWNjb3VudHNdID0gdXNlU3RhdGU8SW5qZWN0ZWRBY2NvdW50V2l0aE1ldGFbXT4oW10pO1xuICBjb25zdCBbc2VsZWN0ZWRBY2NvdW50LCBzZXRTZWxlY3RlZEFjY291bnRdID0gdXNlU3RhdGU8SW5qZWN0ZWRBY2NvdW50V2l0aE1ldGEgfCBudWxsPihudWxsKTtcblxuICAvLyBVSSBzdGF0ZXNcbiAgY29uc3QgW2lzQ29ubmVjdGluZywgc2V0SXNDb25uZWN0aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc2hvd0FjY291bnRTZWxlY3Rvciwgc2V0U2hvd0FjY291bnRTZWxlY3Rvcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgLy8gQXV0aGVudGljYXRpb24gc3RhdGVzXG4gIGNvbnN0IFtpc0F1dGhlbnRpY2F0ZWQsIHNldElzQXV0aGVudGljYXRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc0FsbG93ZWQsIHNldElzQWxsb3dlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFt1c2VyLCBzZXRVc2VyXSA9IHVzZVN0YXRlPFVzZXIgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3Rva2VuLCBzZXRUb2tlbl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICAvLyBTaWduYXR1cmUgc3RhdGVzXG4gIGNvbnN0IFt3YXNTaWduYXR1cmVSZWplY3RlZCwgc2V0V2FzU2lnbmF0dXJlUmVqZWN0ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaXNSZXF1ZXN0aW5nU2lnbmF0dXJlLCBzZXRJc1JlcXVlc3RpbmdTaWduYXR1cmVdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIC8vIFB1YmxpYyBtb2RlIGRldGVjdGlvblxuICBjb25zdCBpc1B1YmxpY01vZGUgPSAhaGFzV2hpdGVsaXN0ZWRBZGRyZXNzZXMoKTtcblxuICAvLyBDYWxjdWxhdGUgZGVyaXZlZCBzdGF0ZXNcbiAgY29uc3QgaXNXYWxsZXRDb25uZWN0ZWQgPSAhIXNlbGVjdGVkQWNjb3VudCB8fCAhIXdhbGxldEFkZHJlc3M7XG5cbiAgLy8gSW5pdGlhbGl6ZSBhdXRoIHN0YXRlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaW5pdEF1dGggPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBSZXN0b3JlIGNvbm5lY3Rpb24gZnJvbSBsb2NhbFN0b3JhZ2UgaWYgYXZhaWxhYmxlXG4gICAgICAgIGNvbnN0IHN0b3JlZEFkZHJlc3MgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnd2FsbGV0LWFkZHJlc3MnKTtcbiAgICAgICAgY29uc3Qgc3RvcmVkVG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aC10b2tlbicpO1xuXG4gICAgICAgIGlmIChzdG9yZWRBZGRyZXNzKSB7XG4gICAgICAgICAgc2V0V2FsbGV0QWRkcmVzcyhzdG9yZWRBZGRyZXNzKTtcblxuICAgICAgICAgIC8vIEdldCBhY2NvdW50cyBpZiBleHRlbnNpb24gaXMgYXZhaWxhYmxlXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGlzRW5hYmxlZCA9IGF3YWl0IFdhbGxldFNlcnZpY2UuZW5hYmxlV2FsbGV0KCk7XG4gICAgICAgICAgICBpZiAoaXNFbmFibGVkKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHdhbGxldEFjY291bnRzID0gYXdhaXQgV2FsbGV0U2VydmljZS5nZXRBY2NvdW50cygpO1xuICAgICAgICAgICAgICBzZXRBY2NvdW50cyh3YWxsZXRBY2NvdW50cyk7XG5cbiAgICAgICAgICAgICAgLy8gRmluZCB0aGUgc3RvcmVkIGFjY291bnRcbiAgICAgICAgICAgICAgY29uc3QgYWNjb3VudCA9IHdhbGxldEFjY291bnRzLmZpbmQoYWNjID0+IGFjYy5hZGRyZXNzID09PSBzdG9yZWRBZGRyZXNzKTtcbiAgICAgICAgICAgICAgaWYgKGFjY291bnQpIHtcbiAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZEFjY291bnQoYWNjb3VudCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIHJlc3RvcmUgd2FsbGV0IGNvbm5lY3Rpb246JywgZXJyKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBSZXN0b3JlIGF1dGggc3RhdGVcbiAgICAgICAgICBpZiAoc3RvcmVkVG9rZW4pIHtcbiAgICAgICAgICAgIHNldFRva2VuKHN0b3JlZFRva2VuKTtcbiAgICAgICAgICAgIHNldElzQXV0aGVudGljYXRlZCh0cnVlKTtcbiAgICAgICAgICAgIHNldElzQWxsb3dlZCh0cnVlKTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgLy8gT3B0aW9uYWxseSByZXN0b3JlIHVzZXIgZGF0YSBpZiB5b3UgaGF2ZSBpdFxuICAgICAgICAgICAgICBjb25zdCB1c2VyRGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyLWRhdGEnKTtcbiAgICAgICAgICAgICAgaWYgKHVzZXJEYXRhKSB7XG4gICAgICAgICAgICAgICAgc2V0VXNlcihKU09OLnBhcnNlKHVzZXJEYXRhKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gcmVzdG9yZSB1c2VyIGRhdGE6JywgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW5pdGlhbGl6aW5nIGF1dGg6JywgZXJyKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGluaXRBdXRoKCk7XG4gIH0sIFtdKTtcblxuICAvLyBDb25uZWN0IHdhbGxldFxuICBjb25zdCBjb25uZWN0ID0gYXN5bmMgKCk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICAgIHNldElzQ29ubmVjdGluZyh0cnVlKTtcbiAgICBzZXRFcnJvcihudWxsKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBFbmFibGUgd2FsbGV0IGV4dGVuc2lvblxuICAgICAgY29uc3QgaXNFbmFibGVkID0gYXdhaXQgV2FsbGV0U2VydmljZS5lbmFibGVXYWxsZXQoKTtcbiAgICAgIGlmICghaXNFbmFibGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV2FsbGV0IGV4dGVuc2lvbiBub3QgZm91bmQgb3Igbm90IGVuYWJsZWQnKTtcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IGFjY291bnRzXG4gICAgICBjb25zdCB3YWxsZXRBY2NvdW50cyA9IGF3YWl0IFdhbGxldFNlcnZpY2UuZ2V0QWNjb3VudHMoKTtcbiAgICAgIGlmICghd2FsbGV0QWNjb3VudHMgfHwgd2FsbGV0QWNjb3VudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gYWNjb3VudHMgZm91bmQgaW4gd2FsbGV0Jyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSBzdGF0ZVxuICAgICAgc2V0QWNjb3VudHMod2FsbGV0QWNjb3VudHMpO1xuICAgICAgc2V0U2hvd0FjY291bnRTZWxlY3Rvcih0cnVlKTtcblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdXYWxsZXQgY29ubmVjdGlvbiBlcnJvcjonLCBlcnIpO1xuICAgICAgc2V0RXJyb3IoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdGYWlsZWQgdG8gY29ubmVjdCB3YWxsZXQnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNDb25uZWN0aW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gU2VsZWN0IGFjY291bnRcbiAgY29uc3Qgc2VsZWN0QWNjb3VudCA9IGFzeW5jIChhY2NvdW50OiBJbmplY3RlZEFjY291bnRXaXRoTWV0YSk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgIHNldFNlbGVjdGVkQWNjb3VudChhY2NvdW50KTtcbiAgICBzZXRXYWxsZXRBZGRyZXNzKGFjY291bnQuYWRkcmVzcyk7XG4gICAgc2V0U2hvd0FjY291bnRTZWxlY3RvcihmYWxzZSk7XG5cbiAgICAvLyBTYXZlIHRvIGxvY2FsU3RvcmFnZVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd3YWxsZXQtYWRkcmVzcycsIGFjY291bnQuYWRkcmVzcyk7XG5cbiAgICAvLyBDaGVjayBpZiB0aGUgYWNjb3VudCBpcyBhbGxvd2VkXG4gICAgY29uc3QgYWxsb3dlZCA9IGlzUHVibGljTW9kZSB8fCBoYXNXaGl0ZWxpc3RlZEFkZHJlc3NlcygpO1xuICAgIHNldElzQWxsb3dlZChhbGxvd2VkKTtcblxuICAgIGlmIChhbGxvd2VkKSB7XG4gICAgICAvLyBBdXRvbWF0aWNhbGx5IHRyaWdnZXIgc2lnbmF0dXJlIHJlcXVlc3QgLSB0aGlzIHdhcyBtaXNzaW5nXG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygnQXV0b21hdGljYWxseSByZXF1ZXN0aW5nIHNpZ25hdHVyZSBmb3IgYWNjb3VudDonLCBhY2NvdW50LmFkZHJlc3MpO1xuICAgICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgcmVxdWVzdFNpZ25hdHVyZShhY2NvdW50LmFkZHJlc3MpO1xuICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1NpZ25hdHVyZSByZXF1ZXN0IGZhaWxlZCBvciB3YXMgcmVqZWN0ZWQnKTtcbiAgICAgICAgICAvLyBTZXQgc3BlY2lmaWMgZXJyb3IgaWYgcmVqZWN0ZWRcbiAgICAgICAgICBpZiAod2FzU2lnbmF0dXJlUmVqZWN0ZWQpIHtcbiAgICAgICAgICAgIHNldEVycm9yKCdTaWduYXR1cmUgcmVqZWN0ZWQuIFBsZWFzZSBzaWduIHRoZSBtZXNzYWdlIHRvIGF1dGhlbnRpY2F0ZS4nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkdXJpbmcgc2lnbmF0dXJlIHJlcXVlc3Q6JywgZXJyKTtcbiAgICAgICAgc2V0RXJyb3IoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdBdXRoZW50aWNhdGlvbiBmYWlsZWQnKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gU2lnbiBtZXNzYWdlXG4gIGNvbnN0IHNpZ25NZXNzYWdlID0gYXN5bmMgKG1lc3NhZ2U6IHN0cmluZywgYWNjb3VudE92ZXJyaWRlPzogSW5qZWN0ZWRBY2NvdW50V2l0aE1ldGEpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+ID0+IHtcbiAgICBjb25zdCBhZGRyZXNzVG9Vc2UgPSBhY2NvdW50T3ZlcnJpZGU/LmFkZHJlc3MgfHwgc2VsZWN0ZWRBY2NvdW50Py5hZGRyZXNzIHx8IHdhbGxldEFkZHJlc3M7XG4gICAgaWYgKCFhZGRyZXNzVG9Vc2UpIHJldHVybiBudWxsO1xuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCBXYWxsZXRTZXJ2aWNlLnNpZ25NZXNzYWdlKGFkZHJlc3NUb1VzZSwgbWVzc2FnZSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTaWduYXR1cmUgZXJyb3I6JywgZXJyKTtcblxuICAgICAgLy8gQ2hlY2sgaWYgdXNlciByZWplY3RlZFxuICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yICYmIGVyci5tZXNzYWdlLmluY2x1ZGVzKCdyZWplY3QnKSkge1xuICAgICAgICBzZXRXYXNTaWduYXR1cmVSZWplY3RlZCh0cnVlKTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfTtcblxuICAvLyBSZXF1ZXN0IHNpZ25hdHVyZSBmb3IgYXV0aGVudGljYXRpb25cbiAgY29uc3QgcmVxdWVzdFNpZ25hdHVyZSA9IGFzeW5jIChhZGRyZXNzOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICBpZiAoIWFkZHJlc3MpIHJldHVybiBmYWxzZTtcblxuICAgIHNldElzUmVxdWVzdGluZ1NpZ25hdHVyZSh0cnVlKTtcbiAgICBzZXRXYXNTaWduYXR1cmVSZWplY3RlZChmYWxzZSk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gQ3JlYXRlIGEgdW5pcXVlIG1lc3NhZ2VcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgU2lnbiB0aGlzIG1lc3NhZ2UgdG8gYXV0aGVudGljYXRlIHdpdGggRG93bmxvYWQgTWFuYWdlcjogJHtEYXRlLm5vdygpfWA7XG5cbiAgICAgIC8vIEdldCBzaWduYXR1cmVcbiAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IGF3YWl0IHNpZ25NZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgaWYgKCFzaWduYXR1cmUpIHJldHVybiBmYWxzZTtcblxuICAgICAgLy8gSW4gYSByZWFsIGFwcCwgeW91J2QgdmVyaWZ5IHRoaXMgc2lnbmF0dXJlIG9uIHRoZSBzZXJ2ZXJcbiAgICAgIC8vIEZvciBkZW1vLCB3ZSdsbCBqdXN0IHNldCBhIHRva2VuXG4gICAgICBjb25zdCBkZW1vVG9rZW4gPSAnZGVtby1hdXRoLXRva2VuLScgKyBEYXRlLm5vdygpO1xuICAgICAgc2V0VG9rZW4oZGVtb1Rva2VuKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhdXRoLXRva2VuJywgZGVtb1Rva2VuKTtcblxuICAgICAgLy8gU2V0IGF1dGhlbnRpY2F0ZWQgc3RhdGVcbiAgICAgIHNldElzQXV0aGVudGljYXRlZCh0cnVlKTtcblxuICAgICAgLy8gQ3JlYXRlIGRlbW8gdXNlclxuICAgICAgY29uc3QgZGVtb1VzZXI6IFVzZXIgPSB7XG4gICAgICAgIGlkOiAnMScsXG4gICAgICAgIGFkZHJlc3MsXG4gICAgICAgIG5hbWU6IHNlbGVjdGVkQWNjb3VudD8ubWV0YT8ubmFtZSB8fCBudWxsLFxuICAgICAgICBpc0FkbWluOiB0cnVlLFxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgbGFzdExvZ2luQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIHVzZXJuYW1lOiBzZWxlY3RlZEFjY291bnQ/Lm1ldGE/Lm5hbWUgfHwgJ1VzZXInIC8vIEZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgICB9O1xuICAgICAgc2V0VXNlcihkZW1vVXNlcik7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlci1kYXRhJywgSlNPTi5zdHJpbmdpZnkoZGVtb1VzZXIpKTtcblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTaWduYXR1cmUgcmVxdWVzdCBmYWlsZWQ6JywgZXJyKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNSZXF1ZXN0aW5nU2lnbmF0dXJlKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gUmVmcmVzaCBhdXRoIHRva2VuXG4gIGNvbnN0IHJlZnJlc2hBdXRoVG9rZW4gPSBhc3luYyAoKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgLy8gSW4gYSByZWFsIGFwcCwgdGhpcyB3b3VsZCByZWZyZXNoIHRoZSB0b2tlbiB3aXRoIHRoZSBzZXJ2ZXJcbiAgICAvLyBGb3IgZGVtbywgd2UnbGwganVzdCBnZW5lcmF0ZSBhIG5ldyB0b2tlblxuICAgIGlmICghaXNBdXRoZW50aWNhdGVkIHx8ICF3YWxsZXRBZGRyZXNzKSByZXR1cm4gZmFsc2U7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgbmV3VG9rZW4gPSAncmVmcmVzaGVkLXRva2VuLScgKyBEYXRlLm5vdygpO1xuICAgICAgc2V0VG9rZW4obmV3VG9rZW4pO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2F1dGgtdG9rZW4nLCBuZXdUb2tlbik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1Rva2VuIHJlZnJlc2ggZmFpbGVkOicsIGVycik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIC8vIExvZ291dFxuICBjb25zdCBsb2dvdXQgPSAoKSA9PiB7XG4gICAgc2V0U2VsZWN0ZWRBY2NvdW50KG51bGwpO1xuICAgIHNldFdhbGxldEFkZHJlc3MobnVsbCk7XG4gICAgc2V0SXNBdXRoZW50aWNhdGVkKGZhbHNlKTtcbiAgICBzZXRJc0FsbG93ZWQoZmFsc2UpO1xuICAgIHNldFVzZXIobnVsbCk7XG4gICAgc2V0VG9rZW4obnVsbCk7XG5cbiAgICAvLyBDbGVhciBsb2NhbFN0b3JhZ2VcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnd2FsbGV0LWFkZHJlc3MnKTtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnYXV0aC10b2tlbicpO1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VyLWRhdGEnKTtcbiAgfTtcblxuICAvLyBSZXNldCByZWplY3Rpb24gc3RhdGVcbiAgY29uc3QgcmVzZXRSZWplY3Rpb25TdGF0ZSA9ICgpID0+IHtcbiAgICBzZXRXYXNTaWduYXR1cmVSZWplY3RlZChmYWxzZSk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8QXV0aENvbnRleHQuUHJvdmlkZXJcbiAgICAgIHZhbHVlPXt7XG4gICAgICAgIC8vIEFjY291bnQgc3RhdGVzXG4gICAgICAgIHdhbGxldEFkZHJlc3MsXG4gICAgICAgIGFjY291bnRzLFxuICAgICAgICBzZWxlY3RlZEFjY291bnQsXG5cbiAgICAgICAgLy8gVUkgc3RhdGVzXG4gICAgICAgIGVycm9yLFxuICAgICAgICBzaG93QWNjb3VudFNlbGVjdG9yLFxuICAgICAgICBzZXRTaG93QWNjb3VudFNlbGVjdG9yLFxuXG4gICAgICAgIC8vIFVzZXIgZGF0YVxuICAgICAgICB1c2VyLFxuICAgICAgICB0b2tlbixcblxuICAgICAgICAvLyBDb3JlIG1ldGhvZHNcbiAgICAgICAgbG9nb3V0LFxuICAgICAgICBjb25uZWN0LFxuICAgICAgICBzZWxlY3RBY2NvdW50LFxuICAgICAgICBzaWduTWVzc2FnZSxcbiAgICAgICAgcmVmcmVzaEF1dGhUb2tlbixcbiAgICAgICAgcmVxdWVzdFNpZ25hdHVyZSxcblxuICAgICAgICAvLyBTaWduYXR1cmUgc3RhdGVzXG4gICAgICAgIHdhc1NpZ25hdHVyZVJlamVjdGVkLFxuICAgICAgICBpc1JlcXVlc3RpbmdTaWduYXR1cmUsXG4gICAgICAgIHJlc2V0UmVqZWN0aW9uU3RhdGUsXG5cbiAgICAgICAgLy8gRGVyaXZlZCBzdGF0ZXNcbiAgICAgICAgaXNQdWJsaWNNb2RlLFxuICAgICAgICBpc1dhbGxldENvbm5lY3RlZCxcbiAgICAgICAgaXNBdXRoZW50aWNhdGVkLFxuICAgICAgICBpc0xvYWRpbmcsXG4gICAgICAgIGlzQWxsb3dlZCxcbiAgICAgICAgaXNDb25uZWN0aW5nXG4gICAgICB9fVxuICAgID5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L0F1dGhDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwiQXV0aENvbnRleHQiLCJXYWxsZXRTZXJ2aWNlIiwiaGFzV2hpdGVsaXN0ZWRBZGRyZXNzZXMiLCJBdXRoUHJvdmlkZXIiLCJjaGlsZHJlbiIsIndhbGxldEFkZHJlc3MiLCJzZXRXYWxsZXRBZGRyZXNzIiwiYWNjb3VudHMiLCJzZXRBY2NvdW50cyIsInNlbGVjdGVkQWNjb3VudCIsInNldFNlbGVjdGVkQWNjb3VudCIsImlzQ29ubmVjdGluZyIsInNldElzQ29ubmVjdGluZyIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsImVycm9yIiwic2V0RXJyb3IiLCJzaG93QWNjb3VudFNlbGVjdG9yIiwic2V0U2hvd0FjY291bnRTZWxlY3RvciIsImlzQXV0aGVudGljYXRlZCIsInNldElzQXV0aGVudGljYXRlZCIsImlzQWxsb3dlZCIsInNldElzQWxsb3dlZCIsInVzZXIiLCJzZXRVc2VyIiwidG9rZW4iLCJzZXRUb2tlbiIsIndhc1NpZ25hdHVyZVJlamVjdGVkIiwic2V0V2FzU2lnbmF0dXJlUmVqZWN0ZWQiLCJpc1JlcXVlc3RpbmdTaWduYXR1cmUiLCJzZXRJc1JlcXVlc3RpbmdTaWduYXR1cmUiLCJpc1B1YmxpY01vZGUiLCJpc1dhbGxldENvbm5lY3RlZCIsImluaXRBdXRoIiwic3RvcmVkQWRkcmVzcyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzdG9yZWRUb2tlbiIsImlzRW5hYmxlZCIsImVuYWJsZVdhbGxldCIsIndhbGxldEFjY291bnRzIiwiZ2V0QWNjb3VudHMiLCJhY2NvdW50IiwiZmluZCIsImFjYyIsImFkZHJlc3MiLCJlcnIiLCJjb25zb2xlIiwid2FybiIsInVzZXJEYXRhIiwiSlNPTiIsInBhcnNlIiwiZSIsImNvbm5lY3QiLCJFcnJvciIsImxlbmd0aCIsIm1lc3NhZ2UiLCJzZWxlY3RBY2NvdW50Iiwic2V0SXRlbSIsImFsbG93ZWQiLCJsb2ciLCJzdWNjZXNzIiwicmVxdWVzdFNpZ25hdHVyZSIsInNpZ25NZXNzYWdlIiwiYWNjb3VudE92ZXJyaWRlIiwiYWRkcmVzc1RvVXNlIiwiaW5jbHVkZXMiLCJEYXRlIiwibm93Iiwic2lnbmF0dXJlIiwiZGVtb1Rva2VuIiwiZGVtb1VzZXIiLCJpZCIsIm5hbWUiLCJtZXRhIiwiaXNBZG1pbiIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsImxhc3RMb2dpbkF0IiwidXNlcm5hbWUiLCJzdHJpbmdpZnkiLCJyZWZyZXNoQXV0aFRva2VuIiwibmV3VG9rZW4iLCJsb2dvdXQiLCJyZW1vdmVJdGVtIiwicmVzZXRSZWplY3Rpb25TdGF0ZSIsIlByb3ZpZGVyIiwidmFsdWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/contexts/auth/AuthProvider.tsx\n"));

/***/ })

});